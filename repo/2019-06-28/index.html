<!doctype html>

<!--
  A presentation done entirely in Markdown, as found in extras/markdown/.
  
  By: @henrikingo
-->

<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Memory Management</title>

  <meta name="description" content="Authoring impress.js presentations in Markdown" />
  <meta name="author" content="Henrik Ingo" />
  <link rel="stylesheet" href="../../extras/highlight/styles/github.css">


  <!--
        Styles specific for this example presentation. 
    -->
  <link href="css/markdown-slides.css" rel="stylesheet" />
  <link href="css/devopsy.css" rel="stylesheet" />
  <link href="css/effects.css" rel="stylesheet" />

</head>

<body class="impress-not-supported">
  <div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified
      version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
  </div>

  <div id="impress" data-transition-duration="1000">

<div id="home" class="step slide markdown" data-rel-x="0" data-rel-y="900">
# Memory Management

* 如何划分模块
1. 物理内存管理:
2. 进程地址空间
3. buffer 和flush buffer(16 17 到底干什么 ?)
4. swap 

并不是很认同 16 17 18 的排布: 总体来说，17 也是flush, 但是 18 特制和swap 的flush，但是两个flush 应该使用的是同一个机制而已.
-----
# 物理内存管理

## 你以为的物理内存管理
 基于 struct page 和　page frame 的一一映射，使用 buddy system 和 slab 分配器进行分配物理内存

## 实际上...
1. 需要首先探测物理内存
2. 为了让内核映射所有的物理内存，引入high memory
3. 为了支持DMA
4. 为了支持NUMA
5. kmalloc 和 vmalloc 之间的区别了解一下.

-----
# 进程地址空间

## 你以为的物理内存管理
使用 mm_struct 和 vm_area_struct 两级管理不同属性的内存区域。

## 实际上...
1. 反向映射
2. ...

-----
# 一些细节问题
1. gfp flags 的作用是什么?
https://stackoverflow.com/questions/11223523/what-is-the-meaning-of-gfp-in-kmalloc-flags




-----

# TODO
1. 分析一下 /proc/sys/vm/ 中间的内容(越来越想知道proc 的实现原理了)















</div>

    <script type="text/javascript">
      var enableBwCss = function () {
        disableDevopsCss();
        disableEffectsCss();
      };

      var enableDevopsCss = function () {
        document.body.classList.add("devopsy");
        disableEffectsCss();
      };

      var disableDevopsCss = function () {
        document.body.classList.remove("devopsy");
      };

      var enableEffectsCss = function () {
        document.body.classList.add("effects");
        disableDevopsCss();
      };

      var disableEffectsCss = function () {
        document.body.classList.remove("effects");
      };

      enableEffectsCss();

    </script>
  </div>

  <div id="impress-toolbar"></div>
  <div id="impress-help"></div>


  <!-- Extra modules
     Load highlight.js, mermaid.js and markdown.js from extras.
     See also src/plugins/extras/extras.js -->
  <script type="text/javascript" src="../../extras/highlight/highlight.pack.js"></script>
  <script type="text/javascript" src="../../extras/mermaid/mermaid.min.js"></script>
  <script type="text/javascript" src="../../extras/markdown/markdown.js"></script>

  <!--
    To make all described above really work, you need to include impress.js in the page.
    You also need to call a `impress().init()` function to initialize impress.js presentation.
    And you should do it in the end of your document. 
-->
  <script type="text/javascript" src="../../js/impress.js"></script>
  <script>impress().init();</script>
</body>

</html>
